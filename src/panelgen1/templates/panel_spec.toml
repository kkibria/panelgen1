[addon]
module_name = "my_panel_addon"
bl_name = "My Panel Add-on"
author = "You"
version = [0, 0, 2]
blender_min = [5, 0, 0]
category = "Sequencer"
location = "VSE > Sidebar > My Panels"
tab_name = "MyPanel"

# ─────────────────────────────────────────
# PROPERTIES
# ─────────────────────────────────────────

[[properties]]
id = "scene.main_label"
owner = "Scene"
attr = "my_main_label"
type = "StringProperty"
name = "Main Label"
description = "Main label text for overlays"
default = "Hello from TOML"

[[properties]]
id = "scene.show_debug"
owner = "Scene"
attr = "my_show_debug"
type = "BoolProperty"
name = "Show Debug"
description = "Toggle debug mode"
default = true

[[properties]]
id = "scene.repeat_count"
owner = "Scene"
attr = "my_repeat_count"
type = "IntProperty"
name = "Repeat Count"
description = "How many times to repeat something"
default = 3
min = 0
max = 20

[[properties]]
id = "scene.mode"
owner = "Scene"
attr = "my_mode"
type = "EnumProperty"
name = "Mode"
description = "Demo enum mode"
default = "OPT_A"

  [[properties.items]]
  identifier = "OPT_A"
  name = "Option A"
  description = "First option"

  [[properties.items]]
  identifier = "OPT_B"
  name = "Option B"
  description = "Second option"

# ─────────────────────────────────────────
# PANELS
# ─────────────────────────────────────────

[[panels]]
idname = "MYADDON_PT_main"
label = "Main Panel"
space_type = "SEQUENCE_EDITOR"
region_type = "UI"
category = "MyPanel"
properties = ["scene.main_label", "scene.show_debug", "scene.repeat_count", "scene.mode"]

  [[panels.operators]]
  idname = "myaddon.dummy_operator"
  label = "Run Dummy"
  description = "Runs the dummy operator"

[[panels]]
idname = "MYADDON_PT_secondary"
label = "Secondary Panel"
space_type = "SEQUENCE_EDITOR"
region_type = "UI"
category = "MyPanel"
properties = ["scene.main_label", "scene.mode"]

  [[panels.operators]]
  idname = "myaddon.dummy_operator"
  label = "Run Dummy (Secondary)"
  description = "Runs the dummy operator from secondary panel"

# ─────────────────────────────────────────
# OPERATORS
# ─────────────────────────────────────────

[[operators]]
idname = "myaddon.dummy_operator"
label = "Dummy Operator"
description = "Dummy operator with custom body"
options = ["REGISTER"]

# Multiline TOML string for body; this becomes the content of execute().
body = """
        scene = context.scene
        self.report({'INFO'}, f\"Label: {scene.my_main_label}, Mode: {scene.my_mode}, Count: {scene.my_repeat_count}\")
        print(\"[Dummy Operator] Debug:\", scene.my_show_debug)
        return {'FINISHED'}
"""
